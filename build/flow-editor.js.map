{"version":3,"sources":["webpack://FlowEditor/webpack/universalModuleDefinition","webpack://FlowEditor/webpack/bootstrap","webpack://FlowEditor/./node_modules/uuid/index.js","webpack://FlowEditor/./node_modules/uuid/lib/bytesToUuid.js","webpack://FlowEditor/./node_modules/uuid/lib/rng-browser.js","webpack://FlowEditor/./node_modules/uuid/v1.js","webpack://FlowEditor/./node_modules/uuid/v4.js","webpack://FlowEditor/./src/editor.js","webpack://FlowEditor/./src/eventBase.js","webpack://FlowEditor/./src/index.js","webpack://FlowEditor/./src/interface.js","webpack://FlowEditor/./src/node.js","webpack://FlowEditor/./src/util.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,SAAS,mBAAO,CAAC,uCAAM;AACvB,SAAS,mBAAO,CAAC,uCAAM;;AAEvB;AACA;AACA;;AAEA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA,UAAU,mBAAO,CAAC,yDAAW;AAC7B,kBAAkB,mBAAO,CAAC,iEAAmB;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;AC5GA,UAAU,mBAAO,CAAC,yDAAW;AAC7B,kBAAkB,mBAAO,CAAC,iEAAmB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyB;AACU;AACA;AACR;AAC3B;AACe,qBAAqB,kDAAS;AAC7C;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;;AAEA,mBAAmB,oBAAoB;AACvC;AACA;;AAEA,mBAAmB,aAAa;AAChC;;AAEA;AACA,uBAAuB,kDAAS;AAChC;AACA;AACA,aAAa;AACb,wBAAwB,kDAAS;AACjC;AACA;AACA,aAAa;AACb,qBAAqB,kDAAS;AAC9B;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,eAAe;AACzD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;AAEA;AACA,mBAAmB,iBAAiB;;AAEpC;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,mBAAmB,aAAa;AAChC,mBAAmB,iBAAiB;;AAEpC,uBAAuB,KAAK;AAC5B;;AAEA,uBAAuB,KAAK;AAC5B;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,2CAAO;AAC1B,gBAAgB,0CAAM;AACtB,oBAAoB,0CAAM;AAC1B,oBAAoB,0CAAM;AAC1B;AACA,gBAAgB,0CAAM;AACtB,oBAAoB,0CAAM;AAC1B,oBAAoB,0CAAM;AAC1B;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yBAAyB,6CAAI;AAC7B;AACA;AACA;AACA,0CAA0C,aAAa;AACvD,SAAS;AACT;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtJA;AAAA;AAAe;AACf;AACA,mBAAmB,wBAAwB,gCAAgC,GAAG;AAC9E;AACA;;AAEA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA,eAAe,OAAO;AACtB,eAAe,EAAE;AACjB,eAAe,MAAM;AACrB;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyB;AACI;AACN;AACR,8GAAM;;;;;;;;;;;;;ACHrB;AAAA;AAAA;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACe;AACf;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA,+BAA+B,UAAU;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,KAAK;AACpB,eAAe,KAAK;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,KAAK;AACpB,eAAe,KAAK;AACpB;AACA;AACA;AACA;;;;;;;;;;;;;ACtFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiC;AACE;AACA;AACR;AAC3B;AACe,mBAAmB,kDAAS;AAC3C;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;;AAEA,mCAAmC,+CAAI;AACvC;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,eAAe,gBAAgB;AAC/B,gCAAgC,8BAA8B;AAC9D,+BAA+B,+BAA+B;;AAE9D,iDAAiD,kDAAS;AAC1D,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB,oDAAoD;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA,+CAA+C,wCAAI;AACnD;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA,iDAAiD,wCAAI;AACrD;AACA;;AAEA,cAAc,6CAAS;AACvB,IAAI,4CAAQ,CAAC,wCAAI;AACjB,IAAI,yCAAK,CAAC,0CAAM;AAChB,IAAI,8CAAU;AACd;;;;;;;;;;;;;ACxKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB;AACO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACO;;AAEP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY,YAAY;AACxB;AACO;;AAEA;;AAEA;;AAEA;;AAEP;AACO;;AAEP;AACO;;AAEP;AACA;AACA;AACA;AACO;;AAEP;AACO;;AAEP;AACA;AACA;AACO;;AAEP;AACO;;AAEA;AACP;;AAEO;;AAEA;;AAEA;;AAEP;AACA;AACA;AACA;AACO;;AAEA","file":"flow-editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FlowEditor\"] = factory();\n\telse\n\t\troot[\"FlowEditor\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import Node from \"./node\"\nimport Interface from \"./interface\"\nimport EventBase from \"./eventBase\"\nimport * as U from \"./util\"\nconst jsPlumb = window.jsPlumb\nexport default class Editor extends EventBase {\n    /**\n     *\n     * @param {object} params\n     * @param {string} params.container\n     * @param {string} params.dragClass\n     */\n    constructor(params) {\n        super()\n\n        /** @type {Array.<HTMLElement>} */\n        this.dragElements = []\n        this.dragClass = params.dragClass\n\n        /** @type {Array.<Node>} */\n        this.nodes = []\n\n        this.interfaces = {\n            start: new Interface({\n                input: [],\n                output: \"id\",\n            }),\n            middle: new Interface({\n                input: [\"id\"],\n                output: \"id\",\n            }),\n            end: new Interface({\n                input: [\"id\"],\n                output: \"\",\n            }),\n        }\n\n        jsPlumb.ready(() => {\n            this.container = document.getElementById(params.container)\n            this.init()\n        })\n    }\n    init() {\n        this.initDragElement()\n        this.initJsplumb()\n    }\n\n    initDragElement() {\n        this.dragElements = Array.from(\n            document.querySelectorAll(`.${this.dragClass}`)\n        )\n        this.dragElements.forEach(el => {\n            el.draggable = true\n            el.addEventListener(\"dragstart\", ev => {\n                ev.dataTransfer.setData(\"text/plain\", el.dataset.type)\n            })\n        })\n        this.container.addEventListener(\"drop\", e => {\n            /** node interface */\n            const type = e.dataTransfer.getData(\"text/plain\")\n\n            /** node position */\n            const { layerX, layerY } = e\n\n            this.addNode({\n                interface: type,\n                position: {\n                    x: layerX,\n                    y: layerY,\n                },\n            })\n        })\n        this.container.addEventListener(\"dragover\", e => {\n            e.preventDefault()\n        })\n    }\n\n    initJsplumb() {\n        jsPlumb.setContainer(this.container)\n        jsPlumb.bind(\"connection\", function(info) {\n            const { connection } = info\n            const { source, target } = connection.getParameters()\n\n            /** @type {Node} */\n            const sourceNode = source.node\n\n            /** @type {Node} */\n            const targetNode = target.node\n\n            sourceNode.addSuccessors(targetNode.uuid)\n            targetNode.addAncestors(sourceNode.uuid)\n        })\n\n        jsPlumb.bind(\"beforeDrop\", function(info, _) {\n            const [source] = info.connection.endpoints\n            const target = info.dropEndpoint\n            return U.notEq(\n                U.pipe(\n                    U.prop(\"source\"),\n                    U.prop(\"node\")\n                )(source.getParameters()),\n                U.pipe(\n                    U.prop(\"target\"),\n                    U.prop(\"node\")\n                )(target.getParameters())\n            )\n        })\n\n        // disable default contextmenu\n        this.container.addEventListener(\"contextmenu\", e => e.preventDefault())\n        jsPlumb.bind(\"contextmenu\", function(component) {\n            console.log(component)\n        })\n    }\n\n    registerNodeEvent(node) {\n        ;[\"contextmenu\", \"click\", \"dblclick\"].forEach(eventName => {\n            node.on(\n                eventName,\n                (params, event) => this.emit(eventName, params, event),\n                this\n            )\n        })\n    }\n    /**\n     *\n     * @param {object} params\n     * @param {string} params.interface\n     * @param {object} params.position\n     * @param {number} params.position.x\n     * @param {number} params.position.y\n     */\n    addNode(params) {\n        params = Object.assign(\n            {\n                interface: \"middle\",\n                container: this.container,\n            },\n            params\n        )\n        const node = new Node({\n            interface: this.interfaces[params.interface],\n            container: this.container,\n            className: \"item\",\n            position: params.position || { x: 0, y: 0 },\n        })\n        this.nodes.push(node)\n        this.registerNodeEvent(node)\n        return node\n    }\n}\n","export default class EventBase {\n    constructor() {\n        /** @type {Object.<string, Array.<{handler: function, context: any}>>} */\n        this.eventHandler = {}\n    }\n\n    /**\n     * @param {string} event\n     * @param {function} handler\n     * @param {object} context\n     */\n    on(event, handler, context) {\n        ;(this.eventHandler[event] || (this.eventHandler[event] = [])).push({\n            handler,\n            context,\n        })\n    }\n\n    /**\n     * @param {string} event\n     * @param {*} params\n     * @param {Event} originalEvent\n     */\n    emit(event, params, originalEvent) {\n        const handlers = this.eventHandler[event] || []\n        handlers.forEach(({ handler, context }) => {\n            handler.call(context, params, originalEvent)\n        })\n    }\n}\n","import Node from \"./node\"\nimport Editor from \"./editor\"\nexport { Editor, Node }\nexport default Editor\n","/**\n * @typedef {object} Type\n * @property {string} name\n * @property {boolean} required\n */\n\n/**\n * @type {Array.<Type>}\n */\nconst TYPES = [\n    {\n        name: \"id\",\n        required: false,\n    },\n]\nexport default class Interface {\n    /**\n     *\n     * @param {object} [params]\n     * @param {string[]} params.input\n     * @param {string} params.output\n     */\n    constructor(params) {\n        const newParams = Object.assign(\n            {\n                input: [\"id\"],\n                output: \"id\",\n            },\n            params\n        )\n        this.input = newParams.input\n        this.output = newParams.output\n    }\n\n    getInputTypes() {\n        return this.input.map(input => TYPES.find(it => it.name === input))\n    }\n\n    getOutputType() {\n        return TYPES.find(it => it.name === this.output)\n    }\n\n    /**\n     * @param {string[]} input\n     */\n    setInput(input) {\n        this.input = input\n    }\n\n    /**\n     * @param {string} output\n     */\n    setOutput(output) {\n        this.output = output\n    }\n}\nInterface.defineType =\n    /**\n     * @param {Type} type\n     */\n    function(type) {\n        let oldIndex = TYPES.findIndex(it => Interface.isSameType(type, it))\n        if (oldIndex !== -1) {\n            console.warn(`类型[${type.name}]被覆盖`)\n            TYPES.splice(oldIndex, 1)\n        }\n        TYPES.push(type)\n    }\n\nInterface.validate =\n    /**\n     * @param {Type} output\n     * @param {Type} input\n     */\n    function(output, input) {\n        return output.name === input.name\n    }\n\nInterface.isSameType =\n    /**\n     *\n     * @param {Type} type1\n     * @param {Type} type2\n     */\n    function(type1, type2) {\n        return type1.name === type2.name\n    }\n","import { v1 as uuid } from \"uuid\"\nimport Interface from \"./interface\"\nimport EventBase from \"./eventBase\"\nimport * as U from \"./util\"\nconst jsPlumb = window.jsPlumb\nexport default class Node extends EventBase {\n    /**\n     * @param {object} params\n     * @param {Element} params.container\n     * @param {string} [params.uuid]\n     * @param {Interface} params.interface\n     * @param {String[]} [params.ancestors]\n     * @param {String[]} [params.successors]\n     * @param {string} [params.className]\n     * @param {object} [params.parameters]\n     * @param {object} [params.parameters]\n     * @param {object} params.position\n     * @param {number} params.position.x\n     * @param {number} params.position.y\n     */\n    constructor(params) {\n        super()\n\n        this.uuid = params.uuid || uuid()\n        this.container = params.container\n\n        const element = document.createElement(\"div\")\n        element.setAttribute(\"id\", this.uuid)\n        element.setAttribute(\"class\", params.className)\n        ;[\"contextmenu\", \"click\", \"dblclick\"].forEach(eventName => {\n            element.addEventListener(eventName, e =>\n                this.emit(eventName, this, e)\n            )\n        })\n        params.container.appendChild(element)\n        const { width, height } = element.getBoundingClientRect()\n        element.style.left = `${params.position.x - width / 2}px`\n        element.style.top = `${params.position.y - height / 2}px`\n\n        this.interface = params.interface || new Interface()\n        /** @type {String[]} */\n        this.ancestors = params.ancestors || []\n        /** @type {String[]} */\n        this.successors = params.successors || []\n\n        const isTarget = params.interface.input.length > 0\n        const isSource = !!params.interface.output\n        const defaultColor = \"#456\"\n        const activeColor = \"#1890ff\"\n        const common = {\n            endpoint: \"Dot\",\n            paintStyle: {\n                fill: defaultColor,\n                strokeStyle: defaultColor,\n                radius: 6,\n            },\n            hoverPaintStyle: {\n                fill: activeColor,\n                strokeStyle: activeColor,\n            },\n            connectorStyle: {\n                outlineStroke: defaultColor,\n                strokeStyle: defaultColor,\n                strokeWidth: 0.5,\n            },\n            connectorHoverStyle: {\n                outlineStroke: activeColor,\n                strokeStyle: activeColor,\n                strokeWidth: 1,\n            },\n            connector: [\n                \"Flowchart\",\n                { gap: 6, cornerRadius: 5, alwaysRespectStubs: true },\n            ],\n            connectorOverlays: [\n                [\n                    \"Arrow\",\n                    {\n                        width: 12,\n                        length: 12,\n                        location: 1,\n                        paintStyle: {\n                            fill: defaultColor,\n                        },\n                    },\n                ],\n            ],\n        }\n        if (isTarget) {\n            params.interface.input.forEach(type => {\n                jsPlumb.addEndpoint(\n                    element,\n                    {\n                        isTarget: true,\n                        isSource: false,\n                        anchor: \"Top\",\n                        maxConnections: -1,\n                        parameters: {\n                            target: {\n                                node: this,\n                                type,\n                                input: true,\n                                output: false,\n                            },\n                        },\n                    },\n                    // @ts-ignore\n                    common\n                )\n            })\n        }\n        if (isSource) {\n            jsPlumb.addEndpoint(\n                element,\n                {\n                    isSource: true,\n                    isTarget: false,\n                    anchor: \"Bottom\",\n                    maxConnections: -1,\n                    parameters: {\n                        source: {\n                            node: this,\n                            type: params.interface.output,\n                            input: false,\n                            output: true,\n                        },\n                    },\n                },\n                // @ts-ignore\n                common\n            )\n        }\n        jsPlumb.draggable(element)\n    }\n\n    /**\n     * @param {string} uuid\n     */\n    addAncestors(uuid) {\n        this.ancestors.push(uuid)\n    }\n\n    /**\n     * @param {string} uuid\n     */\n    removeAncestors(uuid) {\n        this.ancestors = this.ancestors.filter(U.eq(uuid))\n    }\n\n    /**\n     * @param {string} uuid\n     */\n    addSuccessors(uuid) {\n        this.successors.push(uuid)\n    }\n\n    /**\n     * @param {string} uuid\n     */\n    removeSuccessors(uuid) {\n        this.successors = this.successors.filter(U.eq(uuid))\n    }\n}\n\nNode.isSame = U.compose(\n    U.spread(U.eq),\n    U.map(U.prop(\"uuid\")),\n    U.together\n)\n","/**\n * @param {function} fn\n * @param {array} args\n */\nexport const partial = (fn, args) => {\n    return function() {\n        return fn.apply(null, args.concat(Array.from(arguments)))\n    }\n}\n\n/**\n * curryN.\n * @param {function} fn\n * @param {number} n\n */\nexport const curryN = (fn, n) => {\n    return function() {\n        let args = Array.from(arguments)\n        if (n <= args.length) {\n            return fn.apply(null, args)\n        }\n        return curryN(partial(fn, args), n - args.length)\n    }\n}\n\n/**\n * curry.\n * @param {function} fn\n */\nexport const curry = fn => curryN(fn, fn.length)\n\n/**\n * compose.\n */\nexport const compose = function(...fns) {\n    return function() {\n        let index = fns.length - 1\n        let result = fns[index--].apply(null, arguments)\n        while (index >= 0) {\n            result = fns[index--].call(null, result)\n        }\n        return result\n    }\n}\n\n/**\n * @param  {...function} fns\n */\nexport const pipe = (...fns) => compose(...fns.reverse())\n\nexport const unary = fn => (...args) => fn(args[0])\n\nexport const isNil = a => a === undefined || a === null\n\nexport const id = a => a\n\nconst _eq = (a, b) => a === b\nexport const eq = curry(_eq)\n\nconst _not = a => !a\nexport const not = curry(_not)\n\nconst _notEq = compose(\n    not,\n    eq\n)\nexport const notEq = curry(_notEq)\n\nconst _map = (fn, arr) => arr.map(unary(fn))\nexport const map = curry(_map)\n\nconst _prop = (propName, obj) => {\n    return obj[propName]\n}\nexport const prop = curry(_prop)\n\nconst _spread = (fn, arr) => fn(...arr)\nexport const spread = curry(_spread)\n\nexport const ifElse = (check, trueHandler, falseHandler, ...args) =>\n    check(...args) ? trueHandler(...args) : falseHandler(...args)\n\nexport const T = () => true\n\nexport const F = () => false\n\nexport const together = (...args) => args\n\nconst _tap = (fn, a) => {\n    fn(a)\n    return a\n}\nexport const tap = curry(_tap)\n\nexport const debug = curry(tap)(console.log)\n"],"sourceRoot":""}